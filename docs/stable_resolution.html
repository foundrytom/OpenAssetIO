<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>OpenAssetIO [beta]: Stable Entity Resolution</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="all-content">
<div id="body-content">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenAssetIO [beta]
   </div>
   <div id="projectbrief">An abstract API for generalising interactions between a host application and an asset management system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('stable_resolution.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Stable Entity Resolution </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="stable_resolution_overview"></a>
Overview</h1>
<p>One of the main design principles of the <a class="el" href="glossary.html#ManagerInterface">ManagerInterface</a> is that it should be stateless, in the sense that any session state is held by the caller and supplied to the manager as part of the method signature. This is to allow multi-threaded access to the <a class="el" href="glossary.html#ManagerInterface">ManagerInterface</a> and avoid the need for any additional internal state to exist within its implementation. The <a class="el" href="namespaceopenassetio_1_1host_a_p_i_1_1_manager.html">Manager</a> class wraps the interface implementation to help the <a class="el" href="glossary.html#host">host</a> with basic session state management.</p>
<p>Many common use cases require multiple calls to the API to complete a task. Several textures need to be published together, or multiple frames of a render need to be distributed to a render-farm.</p>
<p>If a manager wants to support the concept of a <a class="el" href="glossary.html#meta_version">Meta-version</a>, it becomes essential that there is some way for the manager to know that disparate calls to the API are part of the same conceptual action, so that the resolution of references is stable.</p>
<p>To achieve this, we introduce the idea of a <a class="el" href="glossary.html#manager_state">Manager State</a> token.</p>
<dl class="section note"><dt>Note</dt><dd>Generating a state token is optional for the manager. However, without one, it is not possible to know if any two API calls are being made from a related process.</dd></dl>
<h1><a class="anchor" id="stable_resolution_manager_state"></a>
Manager State</h1>
<p>The manager state mechanism allows a <a class="el" href="glossary.html#manager">manager</a> to embed state within the <a class="el" href="glossary.html#host">host</a>, such that it can correlate API calls.</p>
<p>Whenever a <a class="el" href="glossary.html#Context">Context</a> is created by the host, the <a class="el" href="classopenassetio_1_1v1_1_1manager_a_p_i_1_1_manager_interface.html#adffc166914014188f1df417d1e832e62">ManagerInterface.createState</a> (or <a class="el" href="classopenassetio_1_1v1_1_1manager_a_p_i_1_1_manager_interface.html#a4e784143c880610d29428209c6af3cea">ManagerInterface.createChildState</a>) method will be called, and the returned token stored in the Context's <a class="el" href="structopenassetio_1_1v1_1_1_context.html#a0db519ea93f514ded47d6d4f686ad8a3">managerState</a> property.</p>
<div align="center">
<img src="inline_umlgraph_1.png" />
</div>
<dl class="section warning"><dt>Warning</dt><dd>The host must treat the token as being opaque, and is solely responsible for managing the lifetime of each Context such that it is re-used for logically correlated series of actions. The API middleware takes care of requesting and persisting the state token.</dd></dl>
<h1><a class="anchor" id="stable_resolution_manager_state_distribution"></a>
Distributed Processing</h1>
<p>Distributed processing requires the same context to be shared by multiple discrete working processes.</p>
<p>The <a class="el" href="classopenassetio_1_1v1_1_1host_a_p_i_1_1_manager.html#a1b04adcd844de3172adc8d899e6d698b">Manager.persistenceTokenForContext</a> and <a class="el" href="classopenassetio_1_1v1_1_1host_a_p_i_1_1_manager.html#a74d8494f43bc88e4ba4ff8efaae19105">contextFromPersistenceToken</a> methods provide a mechanism by which a <a class="el" href="glossary.html#host">host</a> can obtain a portable version of the manager's state token for a given context for distribution to other processes that are logically connected.</p>
<div align="center">
<img src="inline_umlgraph_2.png" />
</div>
<dl class="section note"><dt>Note</dt><dd>The above diagram omits the interaction between the Manager and ManagerInterface classes for readability. Right-click to open in a larger view.</dd></dl>
<p>This mechanism allows for distributed API calls to be anchored to specific snapshot of a manager's view of the world. It is not intended to be used to group discrete publishing actions into a batch. This (may be) covered (in the future) by a separate transaction API.</p>
<p>The reason for this is that a host may need to perform multiple independent transactions during the lifetime of a single context.</p>
<h1><a class="anchor" id="stable_resolution_manager_state_guidelines"></a>
Implementation Guidelines</h1>
<ul>
<li>Because a state restored from a persistence token may be passed to multiple child processes, the manager must be prepared for the state to be restored more than once, at the same time. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
  </ul>
</div>
<hr class="footer"/>
<p id="copyright"><small>Copyright 2013-2021 The Foundry Visionmongers Ltd. OpenAssetIO is released under the <a href="https://www.apache.org/licenses/LICENSE-2.0.txt" target="_blank">Apache 2.0 License</a></small></p>
</div>
</body>
</html>
