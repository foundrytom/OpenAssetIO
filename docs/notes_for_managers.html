<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>OpenAssetIO [beta]: Notes for Asset System Integrators</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="all-content">
<div id="body-content">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenAssetIO [beta]
   </div>
   <div id="projectbrief">An abstract API for generalising interactions between a host application and an asset management system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('notes_for_managers.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Notes for Asset System Integrators </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="manager_architecture_summary"></a>
Architecture Summary</h1>
<ul>
<li>In OpenAssetIO, a <a class="el" href="glossary.html#manager">manager</a> is some centralized system that serves as a source of truth regarding the status and/or location of digital media and other organizational aspects of a project. The goal of the API is to allow these systems to be more easily integrated, and critically, more comprehensively involved in the lifetime of content as it moves between various tools and applications.</li>
<li>The implementation of any given manager may consist of several discrete services, but within any OpenAssetIO session, it is represented though a singular <a class="el" href="glossary.html#PythonPluginSystemManagerPlugin">Manager Plugin</a>.</li>
<li>The API is initialized and coordinated by a <a class="el" href="glossary.html#host">host</a>. The host may instantiate one or more managers.</li>
<li>All interaction between the <a class="el" href="glossary.html#host">host</a> and a <a class="el" href="glossary.html#manager">manager</a> occurs through the manager's implementation of the <a class="el" href="glossary.html#ManagerInterface">ManagerInterface</a>. This is a publicly stateless interface, where all associated information about the session, and caller are provided to each method by the API middleware.</li>
<li>A manager's implementation of the <a class="el" href="glossary.html#ManagerInterface">ManagerInterface</a> supplied through its <a class="el" href="glossary.html#PythonPluginSystemManagerPlugin">Manager Plugin</a> is wrapped in the <a class="el" href="classopenassetio_1_1host_api_1_1_manager_1_1_manager.html">Manager</a> class before being made available to the <a class="el" href="glossary.html#host">host</a>. This is to allow for host session state management and other auditing/logging functionality. It also provides a degree of isolation against future API changes.</li>
<li>The <a class="el" href="glossary.html#ManagerInterface">ManagerInterface</a> is designed to be stateless. The response to any method should only depend on the underlying asset data and any other objects passed into each call. The same logical operation may be spread out over time and space. It is critical that any particular implementation does not rely on local in-memory state.</li>
<li>The main currency in the interaction with a host is the <a class="el" href="glossary.html#entity_reference">Entity Reference</a>. These are URIs that uniquely identify an <a class="el" href="glossary.html#entity">entity</a> within the management system. The form of an entity reference is entirely determined by the manager. They are considered to be opaque handles by the host, even if they look like well-formed strings.</li>
<li>The manager is expected to store and recall the trait data <a class="el" href="classopenassetio_1_1v1_1_1manager_api_1_1_manager_interface.html#a29497db96d9994b4c6fa6df154ad5ee4">registered</a> to any given <a class="el" href="glossary.html#entity_reference">Entity Reference</a>, and return this data from the relevant query methods when supplied the reference returned from the registration.</li>
<li>A <a class="el" href="glossary.html#host">host</a> may query other well-known or host-specific traits to provide additional customization of behavior or the handling of data referenced by an <a class="el" href="glossary.html#entity_reference">Entity Reference</a>. For example, determining the correct frame range and colorspace of an image sequence.</li>
<li>The <a class="el" href="glossary.html#Context">Context</a> supplied to a method can be used to understand the intentions and/or requirements of the caller, as well as to determine which part of an application is involved in the call. This can be used to help determine the correct values for <a class="el" href="glossary.html#trait">Trait</a> properties during <a class="el" href="glossary.html#resolve">resolve</a>.</li>
<li>Many API calls are passed a <a class="el" href="glossary.html#trait_set">Trait Set</a>. They form a strong type mechanism, and must be respected as a filter predicate for browsing/query operations, and as a type specifier for creation operations. See <a class="el" href="entities_traits_and_specifications.html">Entities, Traits and Specifications</a> for more details on this mechanism.</li>
<li>The <a class="el" href="glossary.html#ManagerInterface">ManagerInterface</a> implementation will be passed a <a class="el" href="namespaceopenassetio_1_1manager_api.html#af0b6b36dc4c17e5602af317b9c0dc056">HostSession</a> to the majority of API calls. This should be used for <em>all</em> logging, and any generic host queries via the supplied <a class="el" href="namespaceopenassetio_1_1manager_api.html#a3fe707247b4d312c7f2782097ce8fb4d">Host</a> object. Managers may wish to use details of the <a class="el" href="glossary.html#host">host</a> obtained from this object to adapt their behavior if desired.</li>
<li>If a manager wants to support some kind of temporally stable resolution of <a class="el" href="glossary.html#meta_version">Meta-versions</a> or similar, implement <a class="el" href="classopenassetio_1_1v1_1_1manager_api_1_1_manager_interface.html#adffc166914014188f1df417d1e832e62">createState</a>, and return some token that can be used as an anchor. A new token will be requested each time a <a class="el" href="glossary.html#Context">Context</a> is made, and will then be available via <a class="el" href="classopenassetio_1_1v1_1_1_context.html#acd7f8f8c42945369c5077f314db5b917">Context.managerState</a> in any call that receives a context. Hosts will take care of managing the lifetime of any given Context in terms that are meaningful for the user. Eg. the state token will be shared across distributed multi-host renders.</li>
<li>A manager can provide additional UI elements that interact with the host, by returning them from ManagerUIDelegate.getWidgets. The host will create suitable panels, etc. for them, based on the flags set in BaseWidget.getAttributes.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The UI classes have not yet been migrated from the <code>FnAssetAPI</code> code base.</dd></dl>
<h1><a class="anchor" id="manager_todo"></a>
Implementation Check List</h1>
<dl class="section note"><dt>Note</dt><dd>You can use the <a class="el" href="testing.html#testing_manager_plugins">manager test harness</a> to check your implementation, and as a basis for additional tests/CI of your own.</dd></dl>
<h2><a class="anchor" id="manager_todo_basic_resolution"></a>
Required for Resolution Only</h2>
<ul>
<li>Implement the <a class="el" href="namespaceopenassetio_1_1manager_api_1_1_manager_interface.html">ManagerInterface</a> class methods <a class="el" href="classopenassetio_1_1v1_1_1manager_api_1_1_manager_interface.html#a5c0c22c1c2681d3a1deae2da9f487870">identifier</a> an <a class="el" href="classopenassetio_1_1v1_1_1manager_api_1_1_manager_interface.html#afe51f23c7b60c6f5ba182c57bbeeda92">displayName</a>.</li>
<li>Implement <a class="el" href="classopenassetio_1_1v1_1_1manager_api_1_1_manager_interface.html#a7cfabfdd697739e7480d8df603b758dd">managementPolicy</a> to control which Host-side data types you wish to be involved in managing. Return an empty <a class="el" href="classopenassetio_1_1v1_1_1_traits_data.html">TraitsData</a> for any queries with a context with <code>kWrite</code> access (this disables publishing).</li>
<li>Implement the methods grouped under the "Entity Reference Inspection" and "Entity Reference Resolution" sections of the <a class="el" href="classopenassetio_1_1manager_api_1_1_manager_interface_1_1_manager_interface.html">ManagerInterface</a>, along with <a class="el" href="classopenassetio_1_1manager_api_1_1_manager_interface_1_1_manager_interface.html#aa56b821c07983c243b5455859c3d3fa8">entityName</a> and <a class="el" href="classopenassetio_1_1manager_api_1_1_manager_interface_1_1_manager_interface.html#abf0a35b634c24ef90a37b7caff3b9398">entityDisplayName</a> to support lookup of assets.</li>
<li>Implement a <a class="el" href="glossary.html#PythonPluginSystemManagerPlugin">Manager Plugin</a> and install this on <a class="el" href="glossary.html#plugin_path_var">$OPENASSETIO_PLUGIN_PATH</a>.</li>
</ul>
<h2><a class="anchor" id="manager_todo_publishing"></a>
Required for Publishing</h2>
<ul>
<li>Update the implementation of <a class="el" href="classopenassetio_1_1v1_1_1manager_api_1_1_manager_interface.html#a7cfabfdd697739e7480d8df603b758dd">managementPolicy</a> to return suitable traits for contexts with a <code>kWrite</code> access.</li>
<li>Implement the methods grouped under the "Publishing" section, and the remaining methods in the "Entity Information" section of <a class="el" href="classopenassetio_1_1manager_api_1_1_manager_interface_1_1_manager_interface.html">ManagerInterface</a>, to support the registration of new assets.</li>
<li>Map supported OpenAssetIO <a class="el" href="glossary.html#trait">traits</a> to internal asset types where possible.</li>
<li>Persist the full <a class="el" href="glossary.html#trait_set">Trait Set</a> of the specification supplied to <a class="el" href="classopenassetio_1_1v1_1_1manager_api_1_1_manager_interface.html#a29497db96d9994b4c6fa6df154ad5ee4">register</a>. This allows new asset types to be registered and filtered, even if they don't have a unique type within the manager's native data model.</li>
<li>Persist the trait data supplied to <a class="el" href="classopenassetio_1_1v1_1_1manager_api_1_1_manager_interface.html#a29497db96d9994b4c6fa6df154ad5ee4">register</a>. It should be considered opaque, unless the trait is well understood. In all other cases it should be returned verbatim by <a class="el" href="classopenassetio_1_1v1_1_1manager_api_1_1_manager_interface.html#a6235d6c679711ac561ecc50d2c7f1fa3">resolve</a> when passed the reference returned from the registration (conditional on any subsequent registrations to the reference and the policy regarding entity versioning).</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>An example of a situation where the manager is allowed to mutate trait property values is when it is semantically understood. A good example of this is the <code>location</code> property of the <code>locatableContent</code> trait, that is known to be a file path. In these cases, it may be rewritten at will providing it still points to synonymous data. This allows data to be relocated after it has been registered, as appropriate.</dd></dl>
<h2><a class="anchor" id="manager_todo_related_entities"></a>
Supporting Relationships</h2>
<p>Relationship support is not a pre-requisite, but allows for advanced functionality in many hosts.</p>
<p>Relationships aren't required for publishing itself, as the parent for an new entity is always inferred from the entity addressed by the reference used in the <a class="el" href="classopenassetio_1_1v1_1_1manager_api_1_1_manager_interface.html#a5226696851997df1eda5be2d894a1e18">preflight</a> or <a class="el" href="classopenassetio_1_1v1_1_1manager_api_1_1_manager_interface.html#a29497db96d9994b4c6fa6df154ad5ee4">register</a> call.</p>
<p>For example, publishing an ImageSpecification to the entity reference for a shot means that the image should be published under that shot as the manager sees fit.</p>
<p>This may sound counterintuitive, but the references used for publishing will generally originate either from the user, or the manager itself - in response to browsing for a writable target entity for the appropriate <a class="el" href="glossary.html#trait_set">Trait Set</a>. Consequently, they should be conceptually valid for the operation.</p>
<p>Hosts will include in their documentation notes on specific scenarios in which they register entities with one set of traits to references known to be of another, such as the editorial example above.</p>
<p>This approach is critical to ensure that OpenAssetIO has no inherent concept of any specific entity hierarchy, which ensures it never places any constraints on the implementation of any given asset management system.</p>
<p>There are however times when a host will explicitly add a relationship to an entity. Generally speaking, this is when an existing entity is known to be relevant to a newly created one. For example, if an image has been rendered from an assetized script. The host may call <a class="el" href="classopenassetio_1_1manager_api_1_1_manager_interface_1_1_manager_interface.html#a46a4fb56fe244d6b8cabfa7ed936697c">setRelatedReferences</a>, to add the script's reference to the newly registered image, using the SourceDocumentRelationship trait set.</p>
<p>In order to support entity relationships:</p>
<ul>
<li>Implement <a class="el" href="classopenassetio_1_1manager_api_1_1_manager_interface_1_1_manager_interface.html#ad27922210d9d184adf7f1545267d151a">getRelatedReferences</a> to return any appropriate <a class="el" href="glossary.html#entity_reference">entity references</a> for the supplied <a class="el" href="glossary.html#Specification">Specification</a>. Hosts may use these relationships to simplify common pipeline integration tasks. For example, loading multiple AOVs for a render, or determining data dependencies when transferring assets.</li>
<li>If appropriate, implement <a class="el" href="classopenassetio_1_1manager_api_1_1_manager_interface_1_1_manager_interface.html#a46a4fb56fe244d6b8cabfa7ed936697c">setRelatedReferences</a> to update any internal relationships that may be affected by the registered change.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>It is currently in flux as to whether relationship creation should be a hard requirement of the API, or considered hints as set by the host. There is even question as to the validity of the API allowing sets at all, please contribute to the discussion here if you have any opinion on the matter: <a href="https://github.com/OpenAssetIO/OpenAssetIO/discussions/18">https://github.com/OpenAssetIO/OpenAssetIO/discussions/18</a></dd></dl>
<h2><a class="anchor" id="manager_todo_ui"></a>
Embedding Custom UI Within the Host</h2>
<dl class="section note"><dt>Note</dt><dd>The UI layer of OpenAssetIO is yet to be ported to this code base, this documentation section is currently in-progress.</dd></dl>
<ul>
<li>Filter any browsers based on the supplied <a class="el" href="glossary.html#trait_set">Trait Set</a>.</li>
</ul>
<h1><a class="anchor" id="manager_reading"></a>
Recommended Reading</h1>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="entities_traits_and_specifications.html">Entities, Traits and Specifications</a> </dd>
<dd>
<a class="el" href="namespaceopenassetio_1_1manager_api_1_1_manager_interface.html">ManagerInterface</a> </dd>
<dd>
<a class="el" href="namespaceopenassetio_1_1plugin_system_1_1_python_plugin_system_manager_plugin.html">PythonPluginSystemManagerPlugin</a> </dd>
<dd>
<a class="el" href="classopenassetio_1_1v1_1_1_context.html">Context</a> </dd>
<dd>
<a class="el" href="namespaceopenassetio_1_1manager_api.html#a3fe707247b4d312c7f2782097ce8fb4d">Host</a> </dd>
<dd>
ManagerUIDelegate </dd>
<dd>
ui.widgets </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
  </ul>
</div>
<hr class="footer"/>
<p id="copyright"><small>Copyright 2013-2021 The Foundry Visionmongers Ltd. OpenAssetIO is released under the <a href="https://www.apache.org/licenses/LICENSE-2.0.txt" target="_blank">Apache 2.0 License</a></small></p>
</div>
</body>
</html>
